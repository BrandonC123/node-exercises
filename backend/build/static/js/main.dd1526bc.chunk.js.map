{"version":3,"sources":["services/persons.js","components/Person.js","components/Content.js","components/Filter.js","components/Notification.js","components/PersonForm.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Person","name","number","allPersons","setAllPersons","setMessage","onClick","filteredPerson","filter","person","window","confirm","personService","_id","console","log","setTimeout","Content","persons","length","map","i","key","Filter","value","onChange","successStyle","color","background","font_size","border_style","border_radius","padding","margin_bottom","errorStyle","Notification","message","includes","style","className","PersonForm","onSubmit","newName","handleNameChange","newNumber","handleNumberChange","type","App","useState","setPersons","setNewName","setNewNumber","newFilter","setNewFilter","useEffect","getEntries","resetForm","initialPersons","event","target","regex","RegExp","match","preventDefault","index","indexOf","newEntry","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dd1526bc.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"http://localhost:8080/api/persons\";\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n    const request = axios.post(baseUrl, newObject);\r\n    return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n    return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`);\r\n    return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, remove };\r\n","import React from \"react\";\r\nimport personService from \"../services/persons\";\r\n\r\nconst Person = ({ name, number, allPersons, setAllPersons, setMessage }) => {\r\n    const handleDeleteClick = () => {\r\n        const filteredPerson = allPersons.filter((person) => {\r\n            return person.name === name;\r\n        });\r\n        if (window.confirm(`Delete ${name} ?`)) {\r\n            personService.remove(filteredPerson[0]._id);\r\n            console.log(filteredPerson);\r\n            console.log(`${filteredPerson[0].name} successfully deleted`);\r\n            setMessage(`${name} was successfully deleted`);\r\n            setAllPersons(\r\n                allPersons.filter((person) => {\r\n                    return person._id !== filteredPerson[0]._id;\r\n                })\r\n            );\r\n            setTimeout(() => {\r\n                setMessage(null);\r\n            }, 5000);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <li>\r\n            {name} {number} <button onClick={handleDeleteClick}>delete</button>\r\n        </li>\r\n    );\r\n};\r\n\r\nexport default Person;\r\n","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Content = ({persons, allPersons, setAllPersons, setMessage}) => {\r\n  if (persons.length === 0) {\r\n    return (\r\n      <ul>\r\n        {allPersons.map((person, i) =>\r\n          <Person key={i} name={person.name} number={person.number} allPersons={allPersons} setAllPersons={setAllPersons} setMessage={setMessage} />\r\n        )}\r\n      </ul>\r\n    )\r\n  } else {\r\n    return (\r\n      <ul>\r\n        {persons.map((person, i) =>\r\n          <Person key={i} name={person.name} number={person.number} allPersons={allPersons} setAllPersons={setAllPersons} setMessage={setMessage} />\r\n        )}\r\n      </ul>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Content","import React from 'react'\r\n\r\nconst Filter = ({value, onChange}) =>\r\n    <div>\r\n        filter shown with <input value={value} onChange={onChange} />\r\n    </div>\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst successStyle = {\r\n  color: 'green',\r\n  background: 'lightgrey',\r\n  font_size: 20,\r\n  border_style: 'solid',\r\n  border_radius: 5,\r\n  padding: 10,\r\n  margin_bottom: 10\r\n}\r\n\r\nconst errorStyle = {\r\n  color: 'red',\r\n  background: 'lightgrey',\r\n  font_size: 20,\r\n  border_style: 'solid',\r\n  border_radius: 5,\r\n  padding: 10,\r\n  margin_bottom: 10\r\n}\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n\r\n    if (message.includes('was already deleted from server')){\r\n      return (\r\n        <div style={errorStyle} className=\"error\">\r\n          {message}\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <div style={successStyle} className=\"error\">\r\n          {message}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\nexport default Notification","import React from 'react'\r\n\r\nconst PersonForm = ({onSubmit, newName, handleNameChange, newNumber, handleNumberChange}) =>\r\n  <form onSubmit={onSubmit}>\r\n        <div>\r\n            name: <input value={newName} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n            number: <input value={newNumber} onChange={handleNumberChange} />\r\n        </div>\r\n        <div>\r\n            <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n\r\nexport default PersonForm","import React, { useState, useEffect } from \"react\";\r\nimport Content from \"./components/Content\";\r\nimport Filter from \"./components/Filter\";\r\nimport Notification from \"./components/Notification\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport personService from \"./services/persons\";\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([]);\r\n    const [allPersons, setAllPersons] = useState([]);\r\n    const [newName, setNewName] = useState(\"\");\r\n    const [newNumber, setNewNumber] = useState(\"\");\r\n    const [newFilter, setNewFilter] = useState(\"\");\r\n    const [message, setMessage] = useState(null);\r\n\r\n    useEffect(() => {\r\n        getEntries();\r\n    }, []);\r\n\r\n    const addPerson = (event) => {\r\n        event.preventDefault();\r\n        const index = allPersons.map(({ name }) => name).indexOf(newName);\r\n        const newEntry = {\r\n            name: newName,\r\n            number: newNumber,\r\n        };\r\n        if (index !== -1) {\r\n            personService\r\n                .update(allPersons[index]._id, newEntry)\r\n                .then(() => {\r\n                    resetForm();\r\n                    setMessage(\"Name already in phonebook, updating entry\");\r\n                })\r\n                .catch((error) => {\r\n                    console.error(error);\r\n                    console.log(error.response);\r\n                    setMessage(error.response.data.error);\r\n                    setTimeout(() => {\r\n                        setMessage(null);\r\n                    }, 10000);\r\n                });\r\n            console.log(allPersons);\r\n        } else if (newName && newNumber) {\r\n            personService\r\n                .create(newEntry)\r\n                .then(() => {\r\n                    resetForm();\r\n                })\r\n                .catch((error) => {\r\n                    console.error(error.response);\r\n                    setMessage(error.response.data.error);\r\n                    setTimeout(() => {\r\n                        setMessage(null);\r\n                    }, 10000);\r\n                });\r\n        }\r\n    };\r\n    function resetForm() {\r\n        setTimeout(() => {\r\n            getEntries();\r\n            setNewName(\"\");\r\n            setNewNumber(\"\");\r\n        }, 100);\r\n    }\r\n    function getEntries() {\r\n        personService.getAll().then((initialPersons) => {\r\n            setAllPersons(initialPersons);\r\n        });\r\n    }\r\n    const handleNameChange = (event) => {\r\n        setNewName(event.target.value);\r\n    };\r\n\r\n    const handleNumberChange = (event) => {\r\n        setNewNumber(event.target.value);\r\n    };\r\n\r\n    const handleFilterChange = (event) => {\r\n        setNewFilter(event.target.value);\r\n        const regex = new RegExp(newFilter, \"i\");\r\n        const filteredPersons = () =>\r\n            allPersons.filter((person) => person.name.match(regex));\r\n        setPersons(filteredPersons);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification message={message} />\r\n            <Filter value={newFilter} onChange={handleFilterChange} />\r\n            <h2>Add new person</h2>\r\n            <PersonForm\r\n                onSubmit={addPerson}\r\n                newName={newName}\r\n                handleNameChange={handleNameChange}\r\n                newNumber={newNumber}\r\n                handleNumberChange={handleNumberChange}\r\n            />\r\n            <h2>Numbers</h2>\r\n            <Content\r\n                persons={persons}\r\n                allPersons={allPersons}\r\n                setAllPersons={setAllPersons}\r\n                setMessage={setMessage}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}